<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[test]]></title>
    <url>%2F2017%2F05%2F17%2Ftest%2F</url>
    <content type="text"><![CDATA[1 2 3 4 5 6 O O O O O O]]></content>
  </entry>
  <entry>
    <title><![CDATA[Hexo,搭建属于自己的博客]]></title>
    <url>%2F2017%2F05%2F17%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建Samba服务器]]></title>
    <url>%2F2017%2F03%2F13%2Fsamba%2F</url>
    <content type="text"><![CDATA[目录：一、samba的安装二、可以匿名用户登录三、认证用户登录四、用户帐号的映射五、客户端访问控制六、隐藏共享七、问题集 一、samba的安装12345678yum list|grep samba4yum install samba4* -y启动： /etc/init.d/smb restart /etc/init.d/nmb restart设置自动启动：chkconfig smb onchkconfig nmb on 二、可以匿名用户登录12345678910111213 vim /etc/samba/smb.conf[global]security = share[public]comment= publicpath = /publicpublic = yeswritable = yesmkdir publicchmod 777 public/etc/init.d/smb restart/etc/init.d/nmb restart 测试：123456smbclient //10.10.54.81/public\\10.10.54.81\public --window在计算机网络地址栏输入Ubuntusmb://10.10.54.81/public --linux 三、认证用户登录(1)创建samba用户123456789 groupadd public useradd nan -g public --创建系统用户 id nan --查看用户信息 uid=509(nan) gid=509(public) groups=509(public) pdbedit -a -u nan --创建samba用户 pdbedit -L --查看创建的samba用户 nan:509:-u 用户名 -a 创建 //修改密码1smbpasswd nan //删除12345678 pdbedit -x lisn``` //查看samba进程链接``` bashsmbstatus [-pS] [-u username] smbstatus -u public //测试配置文件12345678 testparm /etc/samba/smb.confLoad smb config files from /etc/samba/smb.confrlimit_max: increasing rlimit_max (1024) to minimum Windows limit (16384)Processing section "[public]"WARNING: The security=share option is deprecatedLoaded services file OK.Server role: ROLE_STANDALONEPress enter to see a dump of your service definitions (2)修改配置文件123456789101112131415161718192021222324vim /etc/samba/smb.conf[global]security = userconfig file=/etc/samba/smb.conf.%U[public]comment= publicpath = /publicwrite list= publicwritable = yesbrowseable=yes --设置显示共享文件夹,默认显示 chgrp public /public或者chown root.public /public chmod 755 /public/重启： /etc/init.d/smb restart /etc/init.d/nmb restart测试:smbclient //10.10.54.81/public -U public 四、用户帐号的映射帐号映射配置：12 vim /etc/samba/smbusersnan = aa bb 12345678910配置文件: vim /etc/samba/smb.conf[global]username map=/etc/samba/smbusers --帐号映射[public]comment= publicpath = /publicwritable = yesbrowseable = yes 重启12/etc/init.d/smb restart/etc/init.d/nmb restart 测试：使用帐号aa/bb登录 五、客户端访问控制hosts allow:只允许配置的IP地址/端可以访问samba服务端hosts deny:只拒绝配置的IP地址/端可以访问samba服务端 [global]security = userhosts deny =10.10.54.80 –只禁止10.10.54.80访问hosts allow =10.10.54.80 –只允许10.10.54.80访问[public]comment= publicpath = /publicpublic = yeswrite list=+nan,@public –允许nan用户，public组写入权限 测试：当hosts deny =10.10.54.80，10.10.54.80不能访问当hosts allow =10.10.54.80，只有10.10.54.80能访问 六、隐藏共享需求：/security目录值可以boss用户浏览和登录，/pub目录只可以@yanfa,boss可以访问和浏览 (1)创建用户 useradd boss groupadd yanfa useradd lsn -g yanfa pdbedit -a -u boss (2)修改配置文件需要针对boss用户单独创建配置文件smb.conf.boss cp smb.conf smb.conf.boss vim /etc/samba/smb.conf[global]security = userconfig file = /etc/samba/smb.conf.%U[public]comment= yanfa accesspath = /publicwrite list= @yanfa,boss vim /etc/samba/smb.conf.boss[global]security = user[public]comment= yanfa accesspath = /publicwrite list= @yanfa,boss[security]comment = only boss accesspath = /securitywritable = yes /etc/init.d/nmb restart /etc/init.d/smb restart 测试：smbclient -L 10.10.54.226 -U boss –boss用户smbclient -L 10.10.54.226 -U wenl –研发组人 挂载mount -t cifs //10.10.54.81/softs /mnt/ 设置自动挂载： cat /etc/fstab//192.168.27.233/public /mnt/data/ cifs defaults,username=XXXX,password=XXXX 0 0 setsebool -P samba_export_all_rw on 六、问题集1.不知道什么原因导致samba的nmbnmb状态显示：dead but pid file exists 根据网上!ps -efww|grep smbd|grep -v grep|cut -c 9-15|xargs kill没用!!!! 解决方法：卸载samba更换为samba4再重新配置，OK!!!]]></content>
      <categories>
        <category>Linux服务</category>
      </categories>
      <tags>
        <tag>Linux Server</tag>
      </tags>
  </entry>
</search>